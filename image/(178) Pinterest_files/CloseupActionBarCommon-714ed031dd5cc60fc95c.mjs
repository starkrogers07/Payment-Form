(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["CloseupActionBarCommon"],{"2yVv":function(e,t,n){n.r(t),n.d(t,"ReactionPickerContainer",(function(){return S}));var i=n("q1tI"),o=n("/MKj"),r=n("1Vso"),a=n("0kFJ"),s=n("n6mq"),c=n("nKUr");const l="cubic-bezier(0, 0, 0.58, 1)",d={loaded:{opacity:1,transitionDuration:"0.20s",transitionTimingFunction:l,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"},fade:{opacity:.1,transitionDuration:"0.30s",transitionTimingFunction:l,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"}};function u({reactionLabel:e,handleHideConfirmation:t}){const[n,o]=Object(i.useState)("loaded"),r=Object(i.useRef)();return Object(i.useEffect)(()=>{let e=null,n=null;return r.current=requestAnimationFrame(()=>{e=setTimeout(()=>o("fade"),1e3),n=setTimeout(()=>t(),1300)}),function(){clearTimeout(e),clearTimeout(n)}},[]),Object(c.jsx)(s.f,{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",children:Object(c.jsx)(s.f,{rounding:"pill",position:"absolute",color:"darkGray",ref:r,height:20,display:"flex",alignItems:"center",justifyContent:"center",paddingY:1,paddingX:2,dangerouslySetInlineStyle:{__style:{...d[n],whiteSpace:"nowrap"}},children:Object(c.jsx)(s.cb,{color:"white",size:"sm",weight:"bold",overflow:"normal",children:e})})})}var h=n("ihsa"),p=n("eo+c");const f=40,b={icon:{backgroundRepeat:"no-repeat",backgroundSize:"cover"},loading:{opacity:0,transitionDuration:"0.25s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1) translateZ(0) translateY(25px)",transformOrigin:"bottom"},loaded:{opacity:1,transitionDuration:"0.2s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1)",transformOrigin:"bottom"},clicked:{transition:"transform 0.2s ease-out",transform:"translateY(-30px) scaleX(1.6) scaleY(1.6)",transformOrigin:"bottom",position:"relative",zIndex:1},flying:{transition:"transform 0.2s ease-out",transformOrigin:"bottom"},label:{transition:"transform 0.2s ease-out",transform:"scale(0.625)",transformOrigin:"bottom",whiteSpace:"nowrap"},fading:{opacity:0,transition:"opacity 0.2s ease-out"}},m={boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)"};function y({reactionButtonRect:e,handleReactionTrayClick:t,shouldShowReactionTrayUp:n}){const[o,r]=Object(i.useState)("loading"),[a,l]=Object(i.useState)(""),[d,u]=Object(i.useState)(),[y,j]=Object(i.useState)(!1),[g,O]=Object(i.useState)({}),[x]=Object(i.useState)(e),v=Object(i.useRef)(),S=Object(i.useRef)({});Object(i.useEffect)(()=>{"loading"===o&&(v.current=requestAnimationFrame(()=>r("loaded"))),(()=>{j(!0);const e={...g};p.c.forEach(t=>{S.current[t]&&!e[t]&&(e[t]=S.current[t].getBoundingClientRect())}),Object.keys(e).length===p.c.length&&O(e)})(),!d&&y&&(()=>{const e={...d};p.c.forEach(t=>{const n=g[t],{left:i,top:o}=x,{left:r,top:a}=n,s=i-r-8,c=o-a+9;e[t]={translateX:s,translateY:c}}),u(e)})()},[y,e]);const R=()=>{"clicked"===o&&a&&(r("flying"),setTimeout(()=>{t(a)},750))},T=p.c.map((e,t)=>{const{staticAsset:n,animatedAsset:i,label:r,htmlStyle:l,animationStyle:u}=Object(p.a)(e),m={transitionDelay:.08*t+"s",...b[o]},y={...a===e?b.clicked:b.loaded},j={...d&&a===e?{transform:`translateZ(0) translateX(${d[e].translateX}px) translateY(${d[e].translateY}px) scaleX(0.6) scaleY(0.6) `,...b[o]}:b.fading};let g={};return"loading"===o||"loaded"===o?g={...m}:"clicked"===o?g={...y}:"flying"===o&&(g={...j}),Object(c.jsx)(s.f,{display:"flex",alignSelf:"center",justifyContent:"between",children:Object(c.jsxs)(s.f,{maxHeight:f,maxWidth:f,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",dangerouslySetInlineStyle:{__style:{...g}},ref:t=>{S.current[e]=t},children:[a!==e&&Object(c.jsx)(s.f,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:Object(c.jsx)(s.f,{width:f,height:f,dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${n})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}})}),Object(c.jsxs)(s.f,{display:"flex",alignItems:"center",justifyContent:"center",direction:"column",position:"relative",children:[Object(c.jsx)(h.a,{unsafeCSS:l}),a===e&&"clicked"===o&&Object(c.jsx)(s.f,{rounding:"pill",color:"darkGray",height:20,dangerouslySetInlineStyle:{__style:b.label},display:"flex",alignItems:"center",justifyContent:"center",paddingY:1,paddingX:2,children:Object(c.jsx)(s.cb,{color:"white",size:"sm",weight:"bold",overflow:"normal",children:r})}),Object(c.jsx)("div",{onClick:R,onKeyDown:R,role:"presentation",children:Object(c.jsx)(s.f,{width:f,height:f,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{...b.icon,...a===e&&"clicked"===o?{animation:u}:{},backgroundImage:`url(${i})`}}})})]})]})},t)});return Object(c.jsx)(s.f,{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{marginLeft:-150,marginTop:n?-124:0}},children:Object(c.jsx)(s.f,{display:"flex",alignItems:"center",justifyContent:"center",width:300,height:80,rounding:"pill",color:"flying"===o?"transparent":"white",dangerouslySetInlineStyle:{__style:{..."flying"!==o?m:{}}},onMouseMove:e=>{const{clientX:t}=e;if("flying"!==o){const e=(e=>{let t;return y&&p.c.forEach(n=>{const i=g[n];if(i&&i.left&&i.right){const{left:o,right:r}=i;e>=o&&e<=r&&(t=n)}}),t||null})(t);e!==a&&l(e),r("clicked")}},children:Object(c.jsx)(s.f,{display:"flex",alignItems:"center",justifyContent:"around",width:"100%",paddingX:5,children:T})})})}var j=n("eOdZ");var g=n("U4JR");function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const x="rgb(255,255,255)",v={boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:0};class S extends i.PureComponent{constructor(...e){super(...e),O(this,"state",{clickedReaction:0,isConfirmationShowing:!1,isReactionTrayShowing:!1,reactionButtonRect:null,useInitialReaction:!0,isHoveringOverTray:!1,isHoveringOverButton:!1}),O(this,"reactionButtonRef",Object(i.createRef)()),O(this,"trayOpenTimer",null),O(this,"trayCloseTimer",null),O(this,"onResize",()=>{this.setReactionButtonRect(),this.startTrayCloseTimer()}),O(this,"onScroll",()=>{this.setReactionButtonRect(),this.startTrayCloseTimer()}),O(this,"handleExperienceMount",e=>{e&&e.complete&&(501977===e.experience_id||501995===e.experience_id)&&(this.tooltipExperience=e)}),O(this,"handleReact",(e=7)=>{const{pinId:t,pinUpdateReactionCount:n}=this.props,i={pin_id:t,reaction_type:e},{clickedReaction:o}=this.state;o&&n(t,!1,o),this.setState({clickedReaction:e,useInitialReaction:!1}),n(t,!0,e),j.a.create("ReactionsResource",i).callUpdate()}),O(this,"handleUnreact",()=>{const{pinId:e}=this.props,t={pin_id:e};this.setState({clickedReaction:0,useInitialReaction:!1}),j.a.create("ReactionsResource",t).callDelete()}),O(this,"setReactionButtonRect",()=>{if(this.reactionButtonRef.current&&this.reactionButtonRef.current instanceof HTMLElement){const e=this.reactionButtonRef.current.getBoundingClientRect();this.setState({reactionButtonRect:e})}}),O(this,"closeTray",()=>{this.setState({isReactionTrayShowing:!1})}),O(this,"startTrayCloseTimer",()=>{clearTimeout(this.trayCloseTimer),this.trayCloseTimer=setTimeout(()=>{const{isHoveringOverTray:e,isHoveringOverButton:t}=this.state;e||t||this.closeTray()},300)}),O(this,"handleOnHoverButton",()=>{this.setState({isHoveringOverButton:!0}),clearTimeout(this.trayOpenTimer),this.trayOpenTimer=setTimeout(()=>{const{isReactionTrayShowing:e,isHoveringOverButton:t}=this.state;!e&&t&&this.setState({isReactionTrayShowing:!0})},500),this.tooltipExperience&&this.tooltipExperience.complete&&this.tooltipExperience.complete()}),O(this,"handleOffHoverButton",()=>{this.setState({isHoveringOverButton:!1}),this.startTrayCloseTimer()}),O(this,"handleOnHoverTray",()=>{this.setState({isHoveringOverTray:!0})}),O(this,"handleOffHoverTray",()=>{this.setState({isHoveringOverTray:!1}),this.startTrayCloseTimer()}),O(this,"handleClickButton",()=>{const{clickedReaction:e,useInitialReaction:t}=this.state,{component:n,pinId:i,pinUpdateReactionCount:o,reactionByMe:r,viewParameter:a,viewType:s}=this.props,c=t?r:e;c?(o(i,!1,c),this.handleUnreact()):this.setReaction("love"),clearTimeout(this.trayOpenTimer),this.closeTray(),Object(g.b)(101,{...n?{component:n}:{},view:s||3,viewParameter:a||139,element:11354,objectId:i})}),O(this,"setReaction",e=>{this.handleReact(Object(p.a)(e).type),this.handleShowConfirmation()}),O(this,"handleShowConfirmation",()=>{this.setState({isConfirmationShowing:!0})}),O(this,"handleHideConfirmation",()=>{this.setState({isConfirmationShowing:!1},this.startTrayCloseTimer)})}componentDidMount(){this.setReactionButtonRect(),window.addEventListener("mouseover",this.setReactionButtonRect)}componentWillUnmount(){clearTimeout(this.trayOpenTimer),clearTimeout(this.trayCloseTimer),window.removeEventListener("mouseover",this.setReactionButtonRect)}render(){const{isReactionTrayShowing:e,reactionButtonRect:t,isConfirmationShowing:n,clickedReaction:i,useInitialReaction:o,isHoveringOverTray:l}=this.state,{iconColor:d="darkGray",reactionByMe:h,shouldShowReactionTrayUp:f=!1,showTooltip:b}=this.props,m="darkGray"===d?{hovered:{backgroundColor:"rgb(226, 226, 226)"},active:{backgroundColor:"rgb(218, 218, 218)"},focused:v,iconOnly:{backgroundColor:x}}:{hovered:{backgroundColor:"rgba(255,255,255,0.4)"},active:{backgroundColor:x},focused:v,iconOnly:{backgroundColor:"rgba(255,255,255,0.0)"}},j=o?h:i,g=j?p.b[j]:"default",{staticAsset:O,label:S}=Object(p.a)(g,d);return Object(c.jsxs)(s.f,{position:"relative",children:[Object(c.jsx)(r.a,{accessibilityLabel:"reaction",onClick:this.handleClickButton,onMouseEnter:this.handleOnHoverButton,onMouseLeave:this.handleOffHoverButton,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none",borderRadius:"50%"},children:({active:e,hovered:t,focused:n})=>{let i={};return e?i={...m.active}:t||l?i={...m.hovered}:n&&(i={...m.focused}),Object(c.jsx)(s.f,{color:"transparent",rounding:"circle",dangerouslySetInlineStyle:{__style:i},children:Object(c.jsx)(s.f,{display:"flex",justifyContent:"center",alignItems:"center",dangerouslySetInlineStyle:{__style:{minHeight:44,minWidth:44}},children:Object(c.jsx)(s.f,{height:24,width:24,ref:this.reactionButtonRef,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosiiton:"center",backgroundImage:`url(${O})`}}})})})}}),b&&!e&&!n&&o&&Object(c.jsx)(a.a,{experienceIds:[501977,501995],idealDirection:"down",placementId:12,anchor:this.reactionButtonRef.current,flyoutSize:"lg",onExperienceMount:this.handleExperienceMount}),e&&!!t&&!!t.left&&!!t.top&&Object(c.jsx)(s.f,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(c.jsx)(s.W,{top:0,children:Object(c.jsx)(s.bb,{onMouseEnter:this.handleOnHoverTray,onMouseLeave:this.handleOffHoverTray,children:Object(c.jsx)(y,{reactionButtonRect:t,handleReactionTrayClick:this.setReaction,shouldShowReactionTrayUp:f})})})}),n&&!!j&&S&&Object(c.jsx)(u,{reactionLabel:S,handleHideConfirmation:this.handleHideConfirmation})]})}}t.default=Object(o.connect)(null,e=>({pinUpdateReactionCount:(t,n,i)=>e(function(e,t,n){return{type:"PIN_UPDATE_REACTION_COUNT",payload:{id:e,increment:t,reactionType:n}}}(t,n,i))}))(S)},OPV1:function(e,t,n){var i=n("Ye/N"),o=n("gTC0"),r=n("4cpq"),a=n("dtqy"),s=n("nKUr");t.a=Object(a.a)(({handlePinEditButtonClick:e})=>Object(s.jsx)(r.a,{id:"closeup-pin-edit-button",children:Object(s.jsx)(o.a,{accessibilityLabel:i.a._("Edit","edit button on pin","edit button on pin"),onClick:t=>e&&e(t),icon:"edit"})}))},qlIy:function(e,t,n){n.r(t),n.d(t,"CloseupActionBar",(function(){return v}));var i=n("q1tI"),o=n("/MKj"),r=n("UAdG"),a=n("n6mq"),s=n("tuD4"),c=n("Wer7"),l=n("U4JR"),d=n("nKUr");function u({board:e,favorited:t,pinId:n,section:i}){const u=Object(o.useDispatch)();let h,p;var f;e&&([h,p]=Object(s.b)(null!==(f=e.url)&&void 0!==f?f:""));const b=e=>{Object(l.b)(101,{component:13791,element:e?12225:12226,objectId:n,view:3})};return Object(d.jsx)(a.f,{paddingX:3,children:Object(d.jsx)(r.a,{favorited:t,onFavorite:()=>{b(!0),u(Object(c.f)("BoardResource",{username:p,slug:h,field_set_key:"detailed"})),u(Object(c.f)("BoardSectionResource",{board_slug:h,section_slug:null==i?void 0:i.slug,username:p}))},onUnfavorite:()=>{b(!1)},pinId:n,size:24})})}var h=n("OPV1"),p=n("6wCo"),f=n("0kFJ"),b=n("2yVv"),m=n("rYoy"),y=n("zXAL"),j=n("T5j3"),g=n("/zJj");function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const x=Object(i.lazy)(()=>Promise.resolve().then(n.bind(null,"fepT")));class v extends i.Component{constructor(e){super(e),O(this,"sendExperienceComplete",()=>{}),O(this,"handleExternalSend",()=>{this.sendExperienceComplete()}),O(this,"onSendExperienceMount",e=>{e&&e.complete&&500946===e.experience_id&&(this.sendExperienceComplete=e.complete)}),O(this,"promoteButtonRef",Object(i.createRef)()),this.sendButtonTooltipRef=Object(i.createRef)()}render(){const{editable:e,goBack:t,gridDescription:n,hidePromoteButton:o,imageSrc:r,isFlyoutOpen:s,isOnSecretBoard:c,isPdp:l,onEditSubmit:y,onFlyoutDismiss:O,onToggleFlyout:v,pin:S,promoteButton:R,saveButton:T,shareButtonRef:C,showFavoriteButton:w,viewParameter:I}=this.props,B=c?null:Object(d.jsx)(m.a,{children:Object(d.jsxs)(a.f,{children:[Object(d.jsx)(a.f,{ref:this.sendButtonTooltipRef,children:Object(d.jsx)(x,{buttonType:"icon",gridDescription:n,imageSrc:r,isFlyoutOpen:s,onExternalSend:this.handleExternalSend,onFlyoutDismiss:O,onToggleFlyout:v,pinId:S.id,sendType:"pin",shareButtonRef:C})}),T&&!s&&Object(d.jsx)(f.a,{experienceIds:[500946],placementId:12,anchor:this.sendButtonTooltipRef.current,onExperienceMount:this.onSendExperienceMount})]})}),_=Object(j.c)(S),{board:k,favorited_by_me:E,section:H}=S,P=Object(d.jsxs)(a.f,{alignItems:"center",display:"flex",color:"white",justifyContent:"between",rounding:2,"data-test-id":"closeup-action-items",maxWidth:l?g.f:g.d,children:[Object(d.jsxs)(a.f,{display:"flex",children:[e&&!w&&Object(d.jsx)(a.f,{marginEnd:1,children:Object(d.jsx)(h.a,{carouselSlotCurrentIndex:S&&S.carousel_data&&S.carousel_data.index,pinId:S.id,onSubmit:y,view:3,viewParameter:I})}),Object(d.jsx)(a.f,{marginEnd:w?2:0,children:Object(d.jsx)(p.default,{carouselSlotCurrentIndex:S&&S.carousel_data&&S.carousel_data.index,goBack:t,onEditSubmit:y,pin:S,showEditPin:w,viewParameter:I})})]}),Object(d.jsxs)(a.t,{alignItems:"center",gap:w?2:0,children:[B,_&&Object(d.jsx)(m.a,{children:Object(d.jsx)(b.default,{pinId:S.id,reactionByMe:S.reaction_by_me,showTooltip:!0,viewParameter:I})}),w&&Object(d.jsx)(u,{board:k,favorited:!!E,pinId:S.id,section:H}),!o&&R&&Object(d.jsx)(m.a,{children:Object(d.jsxs)(i.Fragment,{children:[Object(d.jsx)(a.f,{ref:this.promoteButtonRef,children:R}),Object(d.jsx)(f.a,{experienceIds:[501121],idealDirection:"down",placementId:12,anchor:this.promoteButtonRef.current,flyoutSize:"lg"})]})})]})]});return Object(d.jsx)(i.Fragment,{children:Object(d.jsxs)(a.f,{display:"flex",justifyContent:"between",children:[P,Object(d.jsx)(a.f,{marginStart:3,children:T})]})})}}t.default=Object(y.a)(v)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/CloseupActionBarCommon-714ed031dd5cc60fc95c.mjs.map